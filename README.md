# ESP32 HTTP Console

![ESP-IDF Version](https://img.shields.io/badge/ESP--IDF-v5.5.3-blue?style=for-the-badge&logo=espressif)
![Platform](https://img.shields.io/badge/Platform-ESP32-red?style=for-the-badge&logo=espressif)
![License](https://img.shields.io/badge/License-MIT-green?style=for-the-badge)
![Status](https://img.shields.io/badge/Status-Test-orange?style=for-the-badge)
![Tests](https://img.shields.io/badge/Tests-Passing-brightgreen?style=flat-square&logo=github-actions)

–ü—Ä–æ—à–∏–≤–∫–∞ –¥–ª—è –º–æ–¥—É–ª—ñ–≤ ESP32, —è–∫–∞ –¥–æ–∑–≤–æ–ª—è—î –∫–µ—Ä—É–≤–∞—Ç–∏ –º–µ—Ä–µ–∂–µ–≤–∏–º–∏ –∑–∞–ø–∏—Ç–∞–º–∏, —Å–∫–∞–Ω—É–≤–∞—Ç–∏ Wi-Fi —Ç–∞ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–∏—Å—Ç—Ä—ñ–π —á–µ—Ä–µ–∑ —Ç–µ—Ä–º—ñ–Ω–∞–ª UART —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ.

## üõ† –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

* NVS Storage: –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è SSID —Ç–∞ –ø–∞—Ä–æ–ª—è Wi-Fi —É –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ–π –ø–∞–º'—è—Ç—ñ (–ü–ó–£).

* HTTP Client: –í–∏–∫–æ–Ω–∞–Ω–Ω—è GET —Ç–∞ POST –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ –≤—ñ–¥–¥–∞–ª–µ–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä—ñ–≤.

* Wi-Fi Scanner: –ü–æ—à—É–∫ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –º–µ—Ä–µ–∂ –∑ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º —Å–∏–ª–∏ —Å–∏–≥–Ω–∞–ª—É (RSSI).

* System Info: –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤—ñ–ª—å–Ω–æ—ó –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ—ó –ø–∞–º'—è—Ç—ñ (Heap) —Ç–∞ —Å—Ç–∞—Ç—É—Å—É –∑'—î–¥–Ω–∞–Ω–Ω—è.

* Smart Diagnostics: –î–µ—Ç–∞–ª—å–Ω–∏–π –≤–∏–≤—ñ–¥ –ø–æ–º–∏–ª–æ–∫ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è (–Ω–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å, –º–µ—Ä–µ–∂–∞ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞).

* Reset NVS: –ü–æ–≤–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å.

## üíª –ö–æ–º–∞–Ω–¥–∏ –∫–æ–Ω—Å–æ–ª—ñ (CLI)

–ü—ñ—Å–ª—è –ø—Ä–æ—à–∏–≤–∫–∏ –ø—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –¥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é —á–µ—Ä–µ–∑ PuTTY (115200 baud) —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫–æ–º–∞–Ω–¥–∏:

|   –ö–æ–º–∞–Ω–¥–∞	  |                   –û–ø–∏—Å	                    |       –ü—Ä–∏–∫–ª–∞–¥                     |
|-------------|--------------------------------------------|-----------------------------------|
|  `scan`	  | –°–∫–∞–Ω—É—î –µ—Ñ—ñ—Ä –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å Wi-Fi –º–µ—Ä–µ–∂       | `scan`                            |
|  `set_wifi` | –ó–±–µ—Ä—ñ–≥–∞—î SSID —Ç–∞ –ø–∞—Ä–æ–ª—å —É –ü–ó–£	           | `set_wifi MyRouter 12345678`      |
|  `get_wifi` |	–ü–æ–∫–∞–∑—É—î –∑–±–µ—Ä–µ–∂–µ–Ω–∏–π SSID	                 | `get_wifi`                        |
|  `restart`  | –ü—Ä–æ–≥—Ä–∞–º–Ω–µ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–∏—Å—Ç—Ä–æ—é	     | `restart`                         |
|  `http`  	  | –í—ñ–¥–ø—Ä–∞–≤–ª—è—î –∑–∞–ø–∏—Ç (GET/POST)	              | `http GET http://httpbin.org/get` |
|  `info`     | –°—Ç–∞–Ω –ø–∞–º'—è—Ç—ñ —Ç–∞ —Ä—ñ–≤–µ–Ω—å —Å–∏–≥–Ω–∞–ª—É Wi-Fi	     | `info`                            |
| `reset_nvs` | –ü–æ–≤–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å                 | `reset_nvs`                       |
| `help`      |	–°–ø–∏—Å–æ–∫ —É—Å—ñ—Ö –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –∫–æ–º–∞–Ω–¥             | `help`                            |


## üèó –Ø–∫ –∑—ñ–±—Ä–∞—Ç–∏ –ø—Ä–æ—î–∫—Ç (Windows 11)
1. –í–∏–º–æ–≥–∏: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π  Phyton3.13, Git, ESP-IDF v5.x —Ç–∞ VS Code (–∑ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–º —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è–º ESP-IDF).

2. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è:
```Bash
git clone <url_–≤–∞—à–æ–≥–æ_—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é>
cd esp32-http-console
```
3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:

    * –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å `F1` -> `ESP-IDF`: `Set Espressif Device Target` -> `esp32`.

4. –ó–±—ñ—Ä–∫–∞ —Ç–∞ –ø—Ä–æ—à–∏–≤–∫–∞:

    * –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å —ñ–∫–æ–Ω–∫—É ‚öôÔ∏è (Build) —É –Ω–∏–∂–Ω—ñ–π –ø–∞–Ω–µ–ª—ñ.

    * –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å —ñ–∫–æ–Ω–∫—É ‚ö° (Flash) –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–¥—É –≤ ESP32.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```Plaintext
–ø—Ä–æ—î–∫—Ç/
‚îú‚îÄ‚îÄ main/
‚îÇ   ‚îú‚îÄ‚îÄ main.c             # –û—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ (–ö–æ–Ω—Å–æ–ª—å, Wi-Fi, HTTP)
‚îÇ   ‚îî‚îÄ‚îÄ CMakeLists.txt     # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ (console, http, nvs)
‚îú‚îÄ‚îÄ test/
‚îÇ   ‚îú‚îÄ‚îÄ test_geniy_logic.c # –§–∞–π–ª –∑ —Ç–µ—Å—Ç–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ CMakeLists.txt     # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–ª—è —Ç–µ—Å—Ç—ñ–≤
‚îú‚îÄ‚îÄ CMakeLists.txt         # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –ø—Ä–æ—î–∫—Ç—É
‚îî‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```
## üìãTasks List (–°–ø–∏—Å–æ–∫ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å)
 
1. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ–µ–∫—Ç—É: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ä–∫–∞—Å—É –ø—Ä–æ–µ–∫—Ç—É ESP-IDF —Ç–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é Git.

2. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è NVS —Ç–∞ WiFi: –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –µ–Ω–µ—Ä–≥–æ–Ω–µ–∑–∞–ª–µ–∂–Ω–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞ (–ø–æ—Ç—Ä—ñ–±–Ω–æ–≥–æ –¥–ª—è WiFi)
   —Ç–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å—Ç–∞–Ω—Ü—ñ—ó WiFi –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–æ–¥—ñ–π –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö –æ–±–ª—ñ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö.

3. –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è CLI (Command Line Interface) —á–µ—Ä–µ–∑ UART –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é —ñ—Å—Ç–æ—Ä—ñ—ó –∫–æ–º–∞–Ω–¥.

4. –ú–µ—Ä–µ–∂–µ–≤–∏–π –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç:

   * –°–∫–∞–Ω—É–≤–∞–Ω–Ω—è –µ—Ñ—ñ—Ä—É –¥–ª—è –ø–æ—à—É–∫—É SSID —Ç–∞ –∞–Ω–∞–ª—ñ–∑—É —Å–∏–ª–∏ —Å–∏–≥–Ω–∞–ª—É (RSSI).

   * –î–∏–Ω–∞–º—ñ—á–Ω–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Wi-Fi –±–µ–∑ –∂–æ—Ä—Å—Ç–∫–æ—ó –ø—Ä–∏–≤'—è–∑–∫–∏ –¥–æ –∫–æ–¥—É (hardcode).

   * –û–±—Ä–æ–±–∫–∞ –ø–æ–¥—ñ–π (Event Loop) –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø–æ–º–∏–ª–æ–∫ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è.

5. –ú–µ—Ä–µ–∂–µ–≤–∞ –≤–∑–∞—î–º–æ–¥—ñ—è: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ HTTP-–∫–ª—ñ—î–Ω—Ç–∞ (GET/POST) –∑ –æ–±—Ä–æ–±–∫–æ—é –ø–æ—Ç–æ–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö.

6. –°–∏—Å—Ç–µ–º–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ—ó –ø–∞–º'—è—Ç—ñ (Heap) —Ç–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∂–∏—Ç—Ç—î–≤–∏–º —Ü–∏–∫–ª–æ–º –ø—Ä–∏—Å—Ç—Ä–æ—é (restart/reset).

## üß©Block Diagram of the Program (–ë–ª–æ–∫-—Å—Ö–µ–º–∞ –ø—Ä–æ–≥—Ä–∞–º–∏)

–¶—è —Å—Ö–µ–º–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É —Ç–∞ –ª–æ–≥—ñ–∫—É —Ä–æ–±–æ—Ç–∏ –ü–ó:

```
graph TD
    Start((Start app_main)) --> NVS[Init NVS & WiFi Stack]
    NVS --> Console[Init Console & Register Commands]
    Console --> CheckNVS{WiFi in NVS?}
    
    CheckNVS -- No --> Wait[Wait for commands: set_wifi / scan]
    CheckNVS -- Yes --> Connect[Attempt WiFi Connection]
    
    Wait --> Loop[REPL Loop / Command Handler]
    Connect --> Loop
    
    Loop --> cmd_scan[scan: Scan Air & List APs]
    Loop --> cmd_set[set_wifi: Save SSID/Pass to NVS]
    Loop --> cmd_http{http: Is Connected?}
    cmd_http -- Yes --> request[Perform HTTP GET/POST]
    cmd_http -- No --> err_msg[Print: No Network Connection]
    Loop --> cmd_info[info: Show Heap & Signal Strength]
    Loop --> cmd_reset[reset_nvs: Clear Flash]
    Loop --> cmd_restart[restart: Reboot Device]
    
    cmd_scan & cmd_set & request & err_msg & cmd_info & cmd_reset --> Loop
```
## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è (Unit Testing)
–ü—Ä–æ—î–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ **Unity** –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ –ª–æ–≥—ñ–∫–∏:
* –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –¥–æ–≤–∂–∏–Ω–∏ SSID/PASS.
* –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö —É NVS.
* –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –ø—Ä–∏ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ –∫–ª—é—á—ñ–≤ —É –ü–ó–£.
### üõ† –†–µ–∂–∏–º —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞
–î–ª—è –∑–∞–ø—É—Å–∫—É –≤–±—É–¥–æ–≤–∞–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤:
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ `main/main.c`.
2. –†–æ–∑–∫–æ–º–µ–Ω—Ç—É–π—Ç–µ `#define ENABLE_UNIT_TESTS`.
3. –°–∫–æ–º–ø—ñ–ª—é–π—Ç–µ –ø—Ä–æ—î–∫—Ç.

## ‚ö†Ô∏è –ü—Ä–∏–º—ñ—Ç–∫–∏ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞
* –ü—Ä–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ http POST, –¥–∞–Ω—ñ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è —Ç—Ä–µ—Ç—ñ–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º: http POST http://server.com/api {"key":"val"}.

* –ü—Ä–æ—à–∏–≤–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ Wi-Fi –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ, —è–∫—â–æ –¥–∞–Ω—ñ –∑–Ω–∞–π–¥–µ–Ω–æ –≤ NVS.


